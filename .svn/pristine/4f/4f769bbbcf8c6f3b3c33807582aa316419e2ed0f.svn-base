{"version":3,"sources":["chickenbgAni.js"],"names":["cc","Class","extends","Component","properties","far_bg","Node","dead_Canvas","far_speed","isStart","speed","accelerate","targetSpeed","onLoad","fixBgPos","bg1","bg2","x","bg1BoundingBox","getBoundingBox","setPosition","xMin","yMax","update","dt","Math","min","max","checkBgReset","bgMove","bgList","index","length","element","y","first_yMax","height","preFirstBg","shift","push","curFirstBg","startMove","slowDown","stopMove"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACTC,gBAAO,CAACL,GAAGM,IAAJ,CADE;AAETC,qBAAYP,GAAGM,IAFN;AAGTE,mBAAU,GAHD;AAITC,iBAAQ,KAJC;AAKTC,eAAM,CALG;AAMTC,oBAAW,CANF;AAOTC,qBAAY;AAPH,KAHP;;AAaNC,YAAQ,kBAAW;AACf,aAAKC,QAAL,CAAc,KAAKT,MAAL,CAAY,CAAZ,CAAd,EAA6B,KAAKA,MAAL,CAAY,CAAZ,CAA7B;AACH,KAfK;;AAiBNS,cAAS,kBAASC,GAAT,EAAaC,GAAb,EAAiB;AACtBD,YAAIE,CAAJ,GAAQ,CAAR;AACA;AACA,YAAIC,iBAAiBH,IAAII,cAAJ,EAArB;AACAH,YAAII,WAAJ,CAAgBF,eAAeG,IAA/B,EAAoCH,eAAeI,IAAnD;AACH,KAtBK;;AAwBNC,YAAO,gBAASC,EAAT,EAAY;AACf,YAAG,KAAKf,OAAR,EACA;AACI,gBAAG,KAAKG,WAAL,GAAiB,KAAKF,KAAzB,EACA;AACC,qBAAKA,KAAL,IAAYc,KAAG,KAAKb,UAApB;AACA,qBAAKD,KAAL,GAAWe,KAAKC,GAAL,CAAS,KAAKd,WAAd,EAA0B,KAAKF,KAA/B,CAAX;AAEA;AACD,gBAAG,KAAKE,WAAL,GAAiB,KAAKF,KAAzB,EACA;AACC,qBAAKA,KAAL,IAAYc,KAAG,KAAKb,UAApB;AACA,qBAAKD,KAAL,GAAWe,KAAKE,GAAL,CAAS,KAAKf,WAAd,EAA0B,KAAKF,KAA/B,CAAX;AACA;AACD,iBAAKkB,YAAL,CAAkB,KAAKvB,MAAvB;AACH,iBAAKwB,MAAL,CAAY,KAAKxB,MAAjB,EAAwB,KAAKK,KAA7B;AAEA;AAEJ,KA3CK;;AA6CNmB,YAAO,gBAASC,MAAT,EAAgBpB,KAAhB,EAAsB;AACzB,aAAI,IAAIqB,QAAQ,CAAhB,EAAmBA,QAAQD,OAAOE,MAAlC,EAA0CD,OAA1C,EAAkD;AAC9C,gBAAIE,UAAUH,OAAOC,KAAP,CAAd;AACAE,oBAAQC,CAAR,IAAaxB,KAAb;AACH;AACD,aAAKH,WAAL,CAAiB2B,CAAjB,GAAmB,KAAK7B,MAAL,CAAY,CAAZ,EAAe6B,CAAlC;AACH,KAnDK;AAoDN;AACCN,kBAAa,sBAASE,MAAT,EAAgB;AACzB,YAAIK,aAAaL,OAAO,CAAP,EAAUX,cAAV,GAA2BG,IAA5C;AACA,YAAGa,cAAYL,OAAO,CAAP,EAAUM,MAAzB,EAAgC;AAC5BN,mBAAO,CAAP,EAAUI,CAAV,GAAY,CAAZ;AACA,gBAAIG,aAAaP,OAAOQ,KAAP,EAAjB;AACAR,mBAAOS,IAAP,CAAYF,UAAZ;AACA,gBAAIG,aAAaV,OAAO,CAAP,CAAjB;AACAU,uBAAWN,CAAX,GAAe,CAACJ,OAAO,CAAP,EAAUM,MAA1B;AACH;AACJ,KA9DI;AA+DLK,aA/DK,uBAgEL;AACI,aAAKhC,OAAL,GAAa,IAAb;AACA,aAAKG,WAAL,GAAiB,KAAKJ,SAAtB;AACH,KAnEI;AAoELkC,YApEK,sBAqEL;AACI,aAAK9B,WAAL,GAAiB,CAAjB;AACH,KAvEI;AAwEL+B,YAxEK,sBAyEL;AACI,aAAKlC,OAAL,GAAa,KAAb;AACH;AA3EI,CAAT","file":"chickenbgAni.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\animations","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n \r\n    properties: {\r\n       far_bg:[cc.Node],\r\n       dead_Canvas:cc.Node,\r\n       far_speed:0.2,\r\n       isStart:false,\r\n       speed:0,\r\n       accelerate:5,\r\n       targetSpeed:0,\r\n    },\r\n \r\n   onLoad :function() {\r\n       this.fixBgPos(this.far_bg[0],this.far_bg[1]);\r\n   },\r\n \r\n   fixBgPos:function(bg1,bg2){\r\n       bg1.x = 0;\r\n       //利用前一张图片的边框大小设置下一张图片的位置\r\n       var bg1BoundingBox = bg1.getBoundingBox();\r\n       bg2.setPosition(bg1BoundingBox.xMin,bg1BoundingBox.yMax)\r\n   },\r\n \r\n   update:function(dt){\r\n       if(this.isStart)\r\n       {\r\n           if(this.targetSpeed>this.speed)\r\n           {\r\n            this.speed+=dt*this.accelerate;\r\n            this.speed=Math.min(this.targetSpeed,this.speed)\r\n           \r\n           }\r\n           if(this.targetSpeed<this.speed)\r\n           {\r\n            this.speed-=dt*this.accelerate;\r\n            this.speed=Math.max(this.targetSpeed,this.speed)\r\n           }\r\n           this.checkBgReset(this.far_bg);\r\n        this.bgMove(this.far_bg,this.speed);\r\n       \r\n       }\r\n     \r\n   },\r\n \r\n   bgMove:function(bgList,speed){\r\n       for(var index = 0; index < bgList.length; index++){\r\n           var element = bgList[index];\r\n           element.y += speed;\r\n       }\r\n       this.dead_Canvas.y=this.far_bg[0].y;\r\n   },\r\n   //检查是否要重置位置\r\n    checkBgReset:function(bgList){\r\n        var first_yMax = bgList[0].getBoundingBox().yMax;\r\n        if(first_yMax>=bgList[0].height){\r\n            bgList[0].y=0;\r\n            var preFirstBg = bgList.shift();\r\n            bgList.push(preFirstBg);\r\n            var curFirstBg = bgList[0];\r\n            curFirstBg.y = -bgList[0].height;\r\n        }\r\n    },\r\n    startMove()\r\n    {\r\n        this.isStart=true;\r\n        this.targetSpeed=this.far_speed;\r\n    },\r\n    slowDown()\r\n    {\r\n        this.targetSpeed=0;\r\n    },\r\n    stopMove()\r\n    {\r\n        this.isStart=false;\r\n    }\r\n    \r\n});"]}