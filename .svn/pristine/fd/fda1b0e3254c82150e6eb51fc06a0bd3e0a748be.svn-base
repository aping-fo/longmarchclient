{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\MainPanel.js"],"names":["GameManager","require","AudioManager","UIHelper","gameEnum","WXTool","PopupTipsNode","PopupLiveNode","SignPanel","httpReq","LampText","randomTips","_this","TestRoomId","RoleDragonBoneAnims","cc","Class","extends","Component","properties","infoNode","type","Node","default","familyCreateNode","familyJoinNode","roleDragonBone","dragonBones","ArmatureDisplay","lampText","onLoad","errorHandler","appearWithText","director","on","onPlayAdvertiseVideoDone","find","getComponent","Sprite","setState","getInstance","isBgmOn","State","GRAY","NORMAL","start","playLampText","joinFamilyId","active","updateMyInfo","lauchOption","CheckJoin","CheckJoinFamily","GetRoleInfo","resp","Family_GetInfo","playMusic","MUSIC_TYPE","FIGHT","getScheduler","schedule","name","Math","floor","random","length","playAnimation","Chicken_GET_LIMIT","currentChickenLimit","current","nextChickenLimit","next","lastChickenLimit","last","getChildByName","Label","string","myInfo","wxName","SetImageFromUrl","iconUrl","score","limitScore","ProgressBar","progress","isTodaySigned","isTodayLimitSigned","OnSign","onPvpBtnClick","btn","Chicken_CreateRoom","chickenMode","isRoomOwner","roomId","shareToPlayTogether","gameState","GAME_STATE","CHIKEN_MATCHING","loadScene","Chicken_ExitRoom","onRankBtnClick","LoadScene","onReviewBtnClick","onSoundBtnClick","target","sp","setBgmOn","onAddLiveBtnClick","show","onFamilyInfoBtnClick","familyInfo","info","Animation","play","onCloseCreateFamilyNodeBtnClick","onCreateFamilyBtnClick","onCloseCreateFamilyNode1BtnClick","onCreateFamilyOkBtnClick","EditBox","Family_Create","onJoinFamilyBtnClick","Family_AddMember","onCloseJoinFamliyBtnClick","onPracticeBtnClick","onFriendPkClick","chickenLimitTimeLeave","timeLeave","onShopClick","shopType","query","console","log","Chicken_JoinRoom","familyId","invitorName","event","result","GainTool","tips","brodcastList","pop","doPlayLampText","getBrodcast","data","randomTime","round","scheduleOnce"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,cAAcC,QAAQ,aAAR,CAAlB;AACA,IAAIC,eAAeD,QAAQ,cAAR,CAAnB;AACA,IAAIE,WAAWF,QAAQ,UAAR,CAAf;AACA,IAAIG,WAASH,QAAQ,UAAR,CAAb;AACA,IAAII,SAASJ,QAAQ,QAAR,CAAb;AACA,IAAIK,gBAAgBL,QAAQ,eAAR,CAApB;AACA,IAAIM,gBAAgBN,QAAQ,eAAR,CAApB;AACA,IAAIO,YAAWP,QAAQ,WAAR,CAAf;AACA,IAAIQ,UAAQR,QAAQ,SAAR,CAAZ;AACA,IAAIS,WAAST,QAAQ,UAAR,CAAb;AACA,IAAIU,aAAW,CAAC,oCAAD,EAAsC,WAAtC,CAAf;;AAEA,IAAIC,KAAJ;AACA,IAAIC,aAAa,GAAjB;;AAEA,IAAMC,sBAAsB,CAAC,SAAD,EAAY,OAAZ,EAAqB,OAArB,CAA5B;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAU;AACNC,kBAAMN,GAAGO,IADH;AAENC,qBAAS;AAFH,SADF;;AAMRC,0BAAkB;AACdH,kBAAMN,GAAGO,IADK;AAEdC,qBAAS;AAFK,SANV;;AAWRE,wBAAgB;AACZJ,kBAAMN,GAAGO,IADG;AAEZC,qBAAS;AAFG,SAXR;;AAgBRG,wBAAgB;AACZL,kBAAMM,YAAYC,eADN;AAEZL,qBAAS;AAFG,SAhBR;AAoBRM,kBAAU;AACNR,kBAAMX,QADA;AAENa,qBAAS;AAFH;;AApBF,KAHP;;AA8BL;;AAEAO,UAhCK,oBAgCK;AACNlB,gBAAM,IAAN;AACAH,gBAAQsB,YAAR,CAAqB,SAAO,GAAP,GAAW,MAAhC,IAAyC,YAAU;AAACzB,0BAAc0B,cAAd,CAA6B,OAA7B;AAAsC,SAA1F;;AAEA;AACA;AACA;AACA;AACA;;AAEAjB,WAAGkB,QAAH,CAAYC,EAAZ,CAAe,wBAAf,EAAyC,KAAKC,wBAA9C,EAAwE,IAAxE;AACApB,WAAGqB,IAAH,CAAQ,+BAAR,EAAyCC,YAAzC,CAAsDtB,GAAGuB,MAAzD,EAAiEC,QAAjE,CAA0E,CAACrC,aAAasC,WAAb,GAA2BC,OAA3B,EAAD,GAAsC1B,GAAGuB,MAAH,CAAUI,KAAV,CAAgBC,IAAtD,GAA2D5B,GAAGuB,MAAH,CAAUI,KAAV,CAAgBE,MAArJ;AACH,KA5CI;AA8CLC,SA9CK,mBA8CI;AACL,aAAKC,YAAL;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKvB,gBAAL,CAAsBwB,MAAtB,GAA+B,KAA/B;AACA,aAAKvB,cAAL,CAAoBuB,MAApB,GAA6B,KAA7B;;AAEA,aAAKC,YAAL;;AAEA,YAAIC,cAAYlD,YAAYwC,WAAZ,GAA0BU,WAA1C,CARK,CAQiD;AACtD,aAAKC,SAAL,CAAeD,WAAf;AACA,aAAKE,eAAL,CAAqBF,WAArB;AACAlD,oBAAYwC,WAAZ,GAA0BU,WAA1B,GAAwC,IAAxC;;AAEAlD,oBAAYwC,WAAZ,GAA0Ba,WAA1B,CAAsC,UAASC,IAAT,EAAc;AAChD1C,kBAAMqC,YAAN,CAAmBK,IAAnB;AACH,SAFD;;AAIAtD,oBAAYwC,WAAZ,GAA0Be,cAA1B,CAAyC,UAASD,IAAT,EAAc,CAEtD,CAFD;AAGApD,qBAAasC,WAAb,GAA2BgB,SAA3B,CAAqCtD,aAAauD,UAAb,CAAwBC,KAA7D;;AAEA3C,WAAGkB,QAAH,CAAY0B,YAAZ,GAA2BC,QAA3B,CAAoC,YAAU;AAC1C,gBAAIC,OAAO/C,oBAAoBgD,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBlD,oBAAoBmD,MAA/C,CAApB,CAAX;AACA,iBAAKvC,cAAL,CAAoBwC,aAApB,CAAkCL,IAAlC;AACH,SAHD,EAGG,IAHH,EAGS,EAHT,EAGa,KAHb;;AAKA7D,oBAAYwC,WAAZ,GAA0B2B,iBAA1B,CAA4C,UAASb,IAAT,EAC5C;AACItD,wBAAYwC,WAAZ,GAA0B4B,mBAA1B,GAA8Cd,KAAKe,OAAnD;AACArE,wBAAYwC,WAAZ,GAA0B8B,gBAA1B,GAA2ChB,KAAKiB,IAAhD;AACAvE,wBAAYwC,WAAZ,GAA0BgC,gBAA1B,GAA2ClB,KAAKmB,IAAhD;AACH,SALD;AAMH,KA/EI;AAiFLxB,gBAjFK,wBAiFQK,IAjFR,EAiFa;AACd,aAAKlC,QAAL,CAAcsD,cAAd,CAA6B,SAA7B,EAAwCrC,YAAxC,CAAqDtB,GAAG4D,KAAxD,EAA+DC,MAA/D,GAAwE5E,YAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCC,MAAzG;AACA3E,iBAAS4E,eAAT,CAAyBhE,GAAGqB,IAAH,CAAQ,mBAAR,EAA6B,KAAKhB,QAAlC,EAA4CiB,YAA5C,CAAyDtB,GAAGuB,MAA5D,CAAzB,EAA8FtC,YAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCG,OAA/H,EAAwI,IAAxI;;AAEA,YAAG1B,QAAQ,IAAX,EAAgB;AACZtD,wBAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCI,KAAjC,GAAuC3B,KAAK,OAAL,CAAvC;AACAtD,wBAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCK,UAAjC,GAA4C5B,KAAK,YAAL,CAA5C;AACA,iBAAKlC,QAAL,CAAcsD,cAAd,CAA6B,UAA7B,EAAyCrC,YAAzC,CAAsDtB,GAAG4D,KAAzD,EAAgEC,MAAhE,GAAyE,QAAQtB,KAAK,OAAL,CAAjF;AACA,iBAAKlC,QAAL,CAAcsD,cAAd,CAA6B,QAA7B,EAAuCrC,YAAvC,CAAoDtB,GAAG4D,KAAvD,EAA8DC,MAA9D,GAAuEtB,KAAK,OAAL,CAAvE;AACA,gBAAGA,KAAK,YAAL,KAAsB,CAAzB,EAA2B;AACvB,qBAAKlC,QAAL,CAAcsD,cAAd,CAA6B,aAA7B,EAA4CrC,YAA5C,CAAyDtB,GAAGoE,WAA5D,EAAyEC,QAAzE,GAAoF,CAApF;AACH,aAFD,MAEK;AACD,qBAAKhE,QAAL,CAAcsD,cAAd,CAA6B,aAA7B,EAA4CrC,YAA5C,CAAyDtB,GAAGoE,WAA5D,EAAyEC,QAAzE,GAAoF9B,KAAK,KAAL,IAAcA,KAAK,YAAL,CAAlG;AACH;AACD,iBAAKlC,QAAL,CAAcsD,cAAd,CAA6B,aAA7B,EAA4CrC,YAA5C,CAAyDtB,GAAG4D,KAA5D,EAAmEC,MAAnE,GAA4EtB,KAAK,WAAL,CAA5E;;AAEA,gBAAI+B,gBAAc/B,KAAK,eAAL,CAAlB;AACAtD,wBAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCQ,aAAjC,GAA+CA,aAA/C;AACA,gBAAIC,qBAAmBhC,KAAK,oBAAL,CAAvB;AACAtD,wBAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCS,kBAAjC,GAAoDA,kBAApD;AACA,gBAAG,CAACD,aAAJ,EACA;AACI,qBAAKE,MAAL,CAAY,IAAZ;AACH;AACJ;AACJ,KA1GI;AA4GLC,iBA5GK,yBA4GSC,GA5GT,EA4Ga;AACdzF,oBAAYwC,WAAZ,GAA0BkD,kBAA1B,CAA6C,CAA7C,EAA+C,UAASpC,IAAT,EAAc;AACzDtD,wBAAYwC,WAAZ,GAA0BmD,WAA1B,GAAsC,CAAtC;AACA3F,wBAAYwC,WAAZ,GAA0BoD,WAA1B,GAAsC,IAAtC;AACA,gBAAIC,SAAOvC,IAAX;AACAtD,wBAAYwC,WAAZ,GAA0BqD,MAA1B,GAAiCA,MAAjC;AACAxF,mBAAOmC,WAAP,GAAqBsD,mBAArB,CAAyC9F,YAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCC,MAA1E,EAAkFe,MAAlF,EAAyF,YAAU;AAC/F7F,4BAAYwC,WAAZ,GAA0BuD,SAA1B,GAAsC3F,SAAS4F,UAAT,CAAoBC,eAA1D;AACAlF,mBAAGkB,QAAH,CAAYiE,SAAZ,CAAsB,MAAtB,EAA8B,YAAU,CAEvC,CAFD;AAGH,aALD,EAKE,YACF;AACIlG,4BAAYwC,WAAZ,GAA0BU,WAA1B,GAAsC,IAAtC;AACAlD,4BAAYwC,WAAZ,GAA0B2D,gBAA1B,CAA2C,UAAU7C,IAAV,EAAgB,CAC1D,CADD;AAEH,aAVD;AAWH,SAhBD;AAiBH,KA9HI;AAgIL8C,kBAhIK,0BAgIUX,GAhIV,EAgIc;AACfzF,oBAAYwC,WAAZ,GAA0B6D,SAA1B,CAAoC,MAApC;AACH,KAlII;AAoILC,oBApIK,4BAoIYb,GApIZ,EAoIgB;AACjBzF,oBAAYwC,WAAZ,GAA0B6D,SAA1B,CAAoC,QAApC;AACH,KAtII;AAwILE,mBAxIK,2BAwIWd,GAxIX,EAwIe;AAChB,YAAIA,MAAIA,IAAIe,MAAZ;AACA,YAAIC,KAAG1F,GAAGqB,IAAH,CAAQ,MAAR,EAAeqD,GAAf,EAAoBpD,YAApB,CAAiCtB,GAAGuB,MAApC,CAAP;AACAmE,WAAGlE,QAAH,CAAYrC,aAAasC,WAAb,GAA2BC,OAA3B,KAAqC1B,GAAGuB,MAAH,CAAUI,KAAV,CAAgBC,IAArD,GAA0D5B,GAAGuB,MAAH,CAAUI,KAAV,CAAgBE,MAAtF;;AAEA1C,qBAAasC,WAAb,GAA2BkE,QAA3B,CAAoC,CAACxG,aAAasC,WAAb,GAA2BC,OAA3B,EAArC;AACH,KA9II;AAgJLkE,qBAhJK,6BAgJalB,GAhJb,EAgJiB;AAClBlF,sBAAcqG,IAAd;AACH,KAlJI;;;AAoJL;AACAC,wBArJK,gCAqJgBpB,GArJhB,EAqJoB;AACrB,YAAGzF,YAAYwC,WAAZ,GAA0BsE,UAA1B,IAAwC,IAA3C,EAAgD;AAC5C;AACH;;AAED,YAAG9G,YAAYwC,WAAZ,GAA0BsE,UAA1B,CAAqCC,IAArC,IAA6C,IAAhD,EAAqD;AACjD;AACA,iBAAKvF,gBAAL,CAAsBwB,MAAtB,GAA+B,IAA/B;AACA,iBAAKxB,gBAAL,CAAsBa,YAAtB,CAAmCtB,GAAGiG,SAAtC,EAAiDC,IAAjD,CAAsD,mBAAtD,EAA2E,CAA3E;AACA,iBAAKzF,gBAAL,CAAsBkD,cAAtB,CAAqC,aAArC,EAAoD1B,MAApD,GAA6D,KAA7D;AACH,SALD,MAKK;AACDjC,eAAGkB,QAAH,CAAYiE,SAAZ,CAAsB,OAAtB;AACH;AACJ,KAlKI;AAoKLgB,mCApKK,2CAoK2BzB,GApK3B,EAoK+B;AAChC,aAAKjE,gBAAL,CAAsBwB,MAAtB,GAA+B,KAA/B;AACH,KAtKI;AAwKLmE,0BAxKK,kCAwKkB1B,GAxKlB,EAwKsB;AACvB,aAAKjE,gBAAL,CAAsBkD,cAAtB,CAAqC,aAArC,EAAoD1B,MAApD,GAA6D,IAA7D;AACH,KA1KI;AA4KLoE,oCA5KK,4CA4K4B3B,GA5K5B,EA4KgC;AACjC,aAAKjE,gBAAL,CAAsBkD,cAAtB,CAAqC,aAArC,EAAoD1B,MAApD,GAA6D,KAA7D;AACH,KA9KI;AAgLLqE,4BAhLK,oCAgLoB5B,GAhLpB,EAgLwB;AACzB,YAAI5B,OAAO9C,GAAGqB,IAAH,CAAQ,2BAAR,EAAqC,KAAKZ,gBAA1C,EAA4Da,YAA5D,CAAyEtB,GAAGuG,OAA5E,EAAqF1C,MAAhG;;AAEA,YAAGf,KAAKI,MAAL,IAAe,CAAlB,EAAoB;AAChB3D,0BAAc0B,cAAd,CAA6B,QAA7B;AACA;AACH;;AAED,aAAKkF,+BAAL;;AAEAlH,oBAAYwC,WAAZ,GAA0B+E,aAA1B,CAAwC1D,IAAxC,EAA8C,UAASP,IAAT,EAAc;AACxDvC,eAAGkB,QAAH,CAAYiE,SAAZ,CAAsB,OAAtB;AACH,SAFD;AAGH,KA7LI;;;AA+LL;AACAsB,wBAhMK,gCAgMgB/B,GAhMhB,EAgMoB;AACrB,YAAG,KAAK1C,YAAL,IAAqB,CAAxB,EAA0B;AACtB;AACH;AACD,YAAInC,QAAQ,IAAZ;AACAZ,oBAAYwC,WAAZ,GAA0BiF,gBAA1B,CAA2C,KAAK1E,YAAhD,EAA6D,UAASO,IAAT,EAAc;AACvE1C,kBAAMiG,oBAAN;AACH,SAFD;AAGH,KAxMI;AA0MLa,6BA1MK,qCA0MqBjC,GA1MrB,EA0MyB;AAC1B,aAAKhE,cAAL,CAAoBuB,MAApB,GAA6B,KAA7B;AACH,KA5MI;AA8ML2E,sBA9MK,8BA8MclC,GA9Md,EA8MkB;AACnBzF,oBAAYwC,WAAZ,GAA0BkD,kBAA1B,CAA6C,CAA7C,EAA+C,UAASpC,IAAT,EAAc;AACzDtD,wBAAYwC,WAAZ,GAA0BoD,WAA1B,GAAsC,IAAtC;AACA5F,wBAAYwC,WAAZ,GAA0BmD,WAA1B,GAAsC,CAAtC;AACA3F,wBAAYwC,WAAZ,GAA0BuD,SAA1B,GAAsC3F,SAAS4F,UAAT,CAAoBC,eAA1D;AACAlF,eAAGkB,QAAH,CAAYiE,SAAZ,CAAsB,MAAtB,EAA8B,YAAU,CAEvC,CAFD;AAGH,SAPD;AAQH,KAvNI;AAyNL0B,mBAzNK,2BAyNWnC,GAzNX,EA0NL;AACI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAzF,oBAAYwC,WAAZ,GAA0B2B,iBAA1B,CAA4C,UAASb,IAAT,EAC5C;AACItD,wBAAYwC,WAAZ,GAA0B4B,mBAA1B,GAA8Cd,KAAKe,OAAnD;AACArE,wBAAYwC,WAAZ,GAA0B8B,gBAA1B,GAA2ChB,KAAKiB,IAAhD;AACAvE,wBAAYwC,WAAZ,GAA0BgC,gBAA1B,GAA2ClB,KAAKmB,IAAhD;AACAzE,wBAAYwC,WAAZ,GAA0BqF,qBAA1B,GAAgDvE,KAAKwE,SAArD;AACA/G,eAAGkB,QAAH,CAAYiE,SAAZ,CAAsB,WAAtB,EAAmC,YAAU,CAE5C,CAFD;AAGH,SATD;AAYH,KAtPI;AAuPL6B,eAvPK,uBAuPOtC,GAvPP,EAwPL;AACIzF,oBAAYwC,WAAZ,GAA0BwF,QAA1B,GAAmC,CAAnC;AACAjH,WAAGkB,QAAH,CAAYiE,SAAZ,CAAsB,MAAtB,EAA8B,YAAU,CAEvC,CAFD;AAGH,KA7PI;AA8PL/C,aA9PK,qBA8PKD,WA9PL,EA8PiB;AACtB;AACI,YAAGA,eAAe,IAAf,IAAuBA,YAAY+E,KAAZ,IAAqB,IAA/C,EACA,CAEC,CAHD,MAII;AAAC;AACD,gBAAIpC,SAAO3C,YAAY+E,KAAZ,CAAkBpC,MAA7B;AACAqC,oBAAQC,GAAR,CAAY,YAAUtC,MAAtB;AACA,gBAAGA,UAAU,IAAb,EACA;AACI;AACA7F,4BAAYwC,WAAZ,GAA0B4F,gBAA1B,CAA2CvC,MAA3C,EAAkD,UAASvC,IAAT,EAAc;AAC5DtD,gCAAYwC,WAAZ,GAA0BoD,WAA1B,GAAsC,KAAtC;AACA5F,gCAAYwC,WAAZ,GAA0BqD,MAA1B,GAAiCA,MAAjC;AACA7F,gCAAYwC,WAAZ,GAA0BmD,WAA1B,GAAsC,CAAtC;AACA3F,gCAAYwC,WAAZ,GAA0BuD,SAA1B,GAAsC3F,SAAS4F,UAAT,CAAoBC,eAA1D;AACAjG,gCAAYwC,WAAZ,GAA0B6D,SAA1B,CAAoC,MAApC;AAEH,iBAPD;AAQArG,4BAAYwC,WAAZ,GAA0BU,WAA1B,GAAsC,IAAtC;AACH;AACJ;AACJ,KArRI;AAuRLE,mBAvRK,2BAuRWF,WAvRX,EAuRuB;AAC5B;AACI,YAAGA,eAAe,IAAf,IAAuBA,YAAY+E,KAAZ,IAAqB,IAA/C,EAAoD;AAChD;AACH;;AAED;AACA;AACA;AACA,YAAII,WAASnF,YAAY+E,KAAZ,CAAkBI,QAA/B;AACA,YAAIC,cAAcpF,YAAY+E,KAAZ,CAAkBK,WAApC;AACAJ,gBAAQC,GAAR,CAAY,oBAAZ,EAAkCE,QAAlC,EAA4CC,WAA5C;AACA,YAAGD,YAAY,IAAf,EACA;AACI;AACA,iBAAKtF,YAAL,GAAoBsF,QAApB;AACA,iBAAK5G,cAAL,CAAoBuB,MAApB,GAA6B,IAA7B;AACA,iBAAKvB,cAAL,CAAoBY,YAApB,CAAiCtB,GAAGiG,SAApC,EAA+CC,IAA/C,CAAoD,mBAApD;AACAlG,eAAGqB,IAAH,CAAQ,eAAR,EAAyB,KAAKX,cAA9B,EAA8CY,YAA9C,CAA2DtB,GAAG4D,KAA9D,EAAqEC,MAArE,GAA8E0D,WAA9E;AACAtI,wBAAYwC,WAAZ,GAA0BU,WAA1B,GAAsC,IAAtC;AACH;AACJ,KA5SI;AA6SLqC,UA7SK,kBA6SEgD,KA7SF,EA8SL;AACI/H,kBAAUoG,IAAV,CAAe,EAAf,EAAkB,UAAS4B,MAAT,EAAgB;AAC9BxI,wBAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCI,KAAjC,GAAuCuD,MAAvC;AACA5H,kBAAMQ,QAAN,CAAesD,cAAf,CAA8B,QAA9B,EAAwCrC,YAAxC,CAAqDtB,GAAG4D,KAAxD,EAA+DC,MAA/D,GAAwE4D,MAAxE;AACAxI,wBAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCQ,aAAjC,GAA+C,IAA/C;AACH,SAJD,EAIE,CAACrF,YAAYwC,WAAZ,GAA0BqC,MAA1B,CAAiCQ,aAJpC,EAIkD,CAJlD;AAKH,KApTI;AAsTLlD,4BAtTK,oCAsToBqG,MAtTpB,EAsT2B;AAC5B,YAAGA,MAAH,EAAU;AACNxI,wBAAYwC,WAAZ,GAA0BiG,QAA1B,CAAmC,UAASnF,IAAT,EAAc;AAC7C1C,sBAAMQ,QAAN,CAAesD,cAAf,CAA8B,aAA9B,EAA6CrC,YAA7C,CAA0DtB,GAAG4D,KAA7D,EAAoEC,MAApE,GAA6EtB,IAA7E;AACH,aAFD;AAGH;AACJ,KA5TI;AA6TLR,gBA7TK,0BA8TL;;AAEI,YAAI4F,IAAJ;AACA,YAAG1I,YAAYwC,WAAZ,GAA0BmG,YAA1B,IAA0C,IAA1C,IAAkD3I,YAAYwC,WAAZ,GAA0BmG,YAA1B,CAAuC1E,MAAvC,GAA+C,CAApG,EACA;AACIyE,mBAAK1I,YAAYwC,WAAZ,GAA0BmG,YAA1B,CAAuCC,GAAvC,EAAL;AACAhI,kBAAMiI,cAAN,CAAqBH,IAArB;AACH,SAJD,MAMA;AACI1I,wBAAYwC,WAAZ,GAA0BsG,WAA1B,CAAsC,UAASxF,IAAT,EAAc;AAChDtD,4BAAYwC,WAAZ,GAA0BmG,YAA1B,GAAuCrF,IAAvC;AACA,oBAAGA,QAAQ,IAAR,IAAgBA,KAAKW,MAAL,GAAa,CAAhC,EACA;AACIyE,2BAAK1I,YAAYwC,WAAZ,GAA0BmG,YAA1B,CAAuCC,GAAvC,EAAL;AACH;AACDhI,sBAAMiI,cAAN,CAAqBH,IAArB;AACH,aAPD;AAQH;AAGJ,KAnVI;AAoVLG,kBApVK,0BAoVUE,IApVV,EAqVL;AACI,YAAIC,aAAW,KAAG,IAAElF,KAAKE,MAAL,EAApB;AACA,YAAIA,SAAOF,KAAKmF,KAAL,CAAWnF,KAAKE,MAAL,MAAerD,WAAWsD,MAAX,GAAkB,CAAjC,CAAX,CAAX;AACA,YAAIyE,OAAKK,QAAQ,IAAR,GAAapI,WAAWqD,MAAX,CAAb,GAAgC+E,IAAzC;AACA,aAAKG,YAAL,CAAkB,YAAU;AACxBtI,kBAAMiB,QAAN,CAAeoF,IAAf,CAAoByB,IAApB,EAAyB,YAAU;AAAC9H,sBAAMkC,YAAN;AAAqB,aAAzD;AACH,SAFD,EAEEkG,UAFF;AAGH;AA5VI,CAAT","file":"MainPanel.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\nvar GameManager = require(\"GameManager\");\r\nvar AudioManager = require(\"AudioManager\");\r\nvar UIHelper = require(\"UIHelper\");\r\nvar gameEnum=require('GameEnum');\r\nvar WXTool = require(\"WXTool\");\r\nvar PopupTipsNode = require(\"PopupTipsNode\");\r\nvar PopupLiveNode = require(\"PopupLiveNode\");\r\nvar SignPanel= require(\"SignPanel\");\r\nvar httpReq=require('HttpReq');\r\nvar LampText=require('LampText');\r\nvar randomTips=['使用免死金牌可在答题对战中获得一次豁免权，单次对战最多只能使用一次。','积分可兑换商城商品'];\r\n\r\nvar _this;\r\nvar TestRoomId = 100;\r\n\r\nconst RoleDragonBoneAnims = [\"walking\", \"smile\", \"hello\"];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        infoNode: {\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n\r\n        familyCreateNode: {\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n\r\n        familyJoinNode: {\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n\r\n        roleDragonBone: {\r\n            type: dragonBones.ArmatureDisplay,\r\n            default: null\r\n        },\r\n        lampText: {\r\n            type: LampText,\r\n            default: null\r\n        },\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        _this=this;\r\n        httpReq.errorHandler['1005'+'_'+'1000']= function(){PopupTipsNode.appearWithText('今天已领取')};\r\n       \r\n        // WXTool.getInstance().wxOnShow(function(res){\r\n        //     var lauchOption= res;\r\n        //     _this.CheckJoin(lauchOption);\r\n        //     _this.CheckJoinFamily(lauchOption);\r\n        // });\r\n\r\n        cc.director.on(\"PlayAdvertiseVideoDone\", this.onPlayAdvertiseVideoDone, this);\r\n        cc.find('Canvas/leftBar/sound_Btn/icon').getComponent(cc.Sprite).setState(!AudioManager.getInstance().isBgmOn()?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL);\r\n    },\r\n\r\n    start () {\r\n        this.playLampText();\r\n        this.joinFamilyId = 0;\r\n        this.familyCreateNode.active = false;\r\n        this.familyJoinNode.active = false;\r\n\r\n        this.updateMyInfo();\r\n\r\n        var lauchOption=GameManager.getInstance().lauchOption;//启动参数\r\n        this.CheckJoin(lauchOption);\r\n        this.CheckJoinFamily(lauchOption);\r\n        GameManager.getInstance().lauchOption = null;\r\n\r\n        GameManager.getInstance().GetRoleInfo(function(resp){\r\n            _this.updateMyInfo(resp);\r\n        });\r\n\r\n        GameManager.getInstance().Family_GetInfo(function(resp){\r\n\r\n        });\r\n        AudioManager.getInstance().playMusic(AudioManager.MUSIC_TYPE.FIGHT);\r\n\r\n        cc.director.getScheduler().schedule(function(){\r\n            var name = RoleDragonBoneAnims[Math.floor(Math.random() * RoleDragonBoneAnims.length)];\r\n            this.roleDragonBone.playAnimation(name);\r\n        }, this, 10, false);\r\n\r\n        GameManager.getInstance().Chicken_GET_LIMIT(function(resp)\r\n        {\r\n            GameManager.getInstance().currentChickenLimit=resp.current;\r\n            GameManager.getInstance().nextChickenLimit=resp.next;\r\n            GameManager.getInstance().lastChickenLimit=resp.last;\r\n        })\r\n    },\r\n\r\n    updateMyInfo(resp){\r\n        this.infoNode.getChildByName(\"lb_name\").getComponent(cc.Label).string = GameManager.getInstance().myInfo.wxName;      \r\n        UIHelper.SetImageFromUrl(cc.find(\"avatar/img_avatar\", this.infoNode).getComponent(cc.Sprite), GameManager.getInstance().myInfo.iconUrl, true);\r\n\r\n        if(resp != null){\r\n            GameManager.getInstance().myInfo.score=resp[\"score\"];\r\n            GameManager.getInstance().myInfo.limitScore=resp[\"limitScore\"];\r\n            this.infoNode.getChildByName(\"lb_level\").getComponent(cc.Label).string = \"LV.\" + resp[\"level\"];\r\n            this.infoNode.getChildByName(\"lb_num\").getComponent(cc.Label).string = resp[\"score\"];\r\n            if(resp[\"levelUpExp\"] == 0){\r\n                this.infoNode.getChildByName(\"expProgress\").getComponent(cc.ProgressBar).progress = 1;\r\n            }else{\r\n                this.infoNode.getChildByName(\"expProgress\").getComponent(cc.ProgressBar).progress = resp[\"exp\"] / resp[\"levelUpExp\"];\r\n            }\r\n            this.infoNode.getChildByName(\"lb_live_num\").getComponent(cc.Label).string = resp[\"toolCount\"];\r\n            \r\n            var isTodaySigned=resp['isTodaySigned'];\r\n            GameManager.getInstance().myInfo.isTodaySigned=isTodaySigned;\r\n            var isTodayLimitSigned=resp['isTodayLimitSigned'];\r\n            GameManager.getInstance().myInfo.isTodayLimitSigned=isTodayLimitSigned;\r\n            if(!isTodaySigned)\r\n            {\r\n                this.OnSign(null);\r\n            }\r\n        }\r\n    },\r\n\r\n    onPvpBtnClick(btn){\r\n        GameManager.getInstance().Chicken_CreateRoom(3,function(resp){\r\n            GameManager.getInstance().chickenMode=1;\r\n            GameManager.getInstance().isRoomOwner=true;\r\n            var roomId=resp;\r\n            GameManager.getInstance().roomId=roomId;\r\n            WXTool.getInstance().shareToPlayTogether(GameManager.getInstance().myInfo.wxName, roomId,function(){\r\n                GameManager.getInstance().gameState = gameEnum.GAME_STATE.CHIKEN_MATCHING;\r\n                cc.director.loadScene(\"game\", function(){\r\n            \r\n                });\r\n            },function()\r\n            {\r\n                GameManager.getInstance().lauchOption=null;\r\n                GameManager.getInstance().Chicken_ExitRoom(function (resp) {\r\n                })\r\n            });    \r\n        })\r\n    },\r\n\r\n    onRankBtnClick(btn){\r\n        GameManager.getInstance().LoadScene(\"rank\");\r\n    },\r\n\r\n    onReviewBtnClick(btn){\r\n        GameManager.getInstance().LoadScene(\"review\");\r\n    },\r\n\r\n    onSoundBtnClick(btn){\r\n        var btn=btn.target;\r\n        var sp=cc.find('icon',btn).getComponent(cc.Sprite);\r\n        sp.setState(AudioManager.getInstance().isBgmOn()?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL);\r\n        \r\n        AudioManager.getInstance().setBgmOn(!AudioManager.getInstance().isBgmOn());\r\n    },\r\n\r\n    onAddLiveBtnClick(btn){\r\n        PopupLiveNode.show();\r\n    },\r\n\r\n    ////////////////////////////////  家庭群  ////////////////////////////////\r\n    onFamilyInfoBtnClick(btn){\r\n        if(GameManager.getInstance().familyInfo == null){\r\n            return;\r\n        }\r\n        \r\n        if(GameManager.getInstance().familyInfo.info == null){\r\n            //创建家庭群\r\n            this.familyCreateNode.active = true;\r\n            this.familyCreateNode.getComponent(cc.Animation).play(\"main_createfamily\", 0);\r\n            this.familyCreateNode.getChildByName(\"createNode1\").active = false;\r\n        }else{\r\n            cc.director.loadScene(\"group\");\r\n        }\r\n    },\r\n\r\n    onCloseCreateFamilyNodeBtnClick(btn){\r\n        this.familyCreateNode.active = false;\r\n    },\r\n\r\n    onCreateFamilyBtnClick(btn){\r\n        this.familyCreateNode.getChildByName(\"createNode1\").active = true;\r\n    },\r\n\r\n    onCloseCreateFamilyNode1BtnClick(btn){\r\n        this.familyCreateNode.getChildByName(\"createNode1\").active = false;\r\n    },\r\n\r\n    onCreateFamilyOkBtnClick(btn){\r\n        var name = cc.find(\"createNode1/panel/eb_name\", this.familyCreateNode).getComponent(cc.EditBox).string;\r\n        \r\n        if(name.length == 0){\r\n            PopupTipsNode.appearWithText(\"名字不能为空\");\r\n            return;\r\n        }\r\n\r\n        this.onCloseCreateFamilyNodeBtnClick();\r\n\r\n        GameManager.getInstance().Family_Create(name, function(resp){\r\n            cc.director.loadScene(\"group\");\r\n        });\r\n    },\r\n\r\n    ////////////////////////////////  邀请进家庭群  ////////////////////////////////\r\n    onJoinFamilyBtnClick(btn){\r\n        if(this.joinFamilyId == 0){\r\n            return;\r\n        }\r\n        var _this = this;\r\n        GameManager.getInstance().Family_AddMember(this.joinFamilyId,function(resp){\r\n            _this.onFamilyInfoBtnClick();\r\n        });\r\n    },\r\n\r\n    onCloseJoinFamliyBtnClick(btn){\r\n        this.familyJoinNode.active = false;\r\n    },\r\n\r\n    onPracticeBtnClick(btn){\r\n        GameManager.getInstance().Chicken_CreateRoom(2,function(resp){\r\n            GameManager.getInstance().isRoomOwner=true;\r\n            GameManager.getInstance().chickenMode=2;\r\n            GameManager.getInstance().gameState = gameEnum.GAME_STATE.CHIKEN_MATCHING;\r\n            cc.director.loadScene(\"game\", function(){\r\n        \r\n            });\r\n        })\r\n    },\r\n\r\n    onFriendPkClick(btn)\r\n    {\r\n        // GameManager.getInstance().Chicken_CreateRoom(4,function(resp){\r\n        //     GameManager.getInstance().chickenMode=1;\r\n        //     var roomId=resp;\r\n        //     WXTool.getInstance().shareToPlayTogether(GameManager.getInstance().myInfo.wxName, roomId,function(){\r\n        //         GameManager.getInstance().gameState = gameEnum.GAME_STATE.CHIKEN_MATCHING;\r\n        //         cc.director.loadScene(\"game\", function(){\r\n            \r\n        //         });\r\n        //     },function()\r\n        //     {\r\n        //         GameManager.getInstance().lauchOption=null;\r\n        //         GameManager.getInstance().Chicken_ExitRoom(function (resp) {\r\n        //         })\r\n        //     });    \r\n        // })\r\n        GameManager.getInstance().Chicken_GET_LIMIT(function(resp)\r\n        {\r\n            GameManager.getInstance().currentChickenLimit=resp.current;\r\n            GameManager.getInstance().nextChickenLimit=resp.next;\r\n            GameManager.getInstance().lastChickenLimit=resp.last;\r\n            GameManager.getInstance().chickenLimitTimeLeave=resp.timeLeave;\r\n            cc.director.loadScene(\"mainLimit\", function(){\r\n        \r\n            });\r\n        })\r\n      \r\n      \r\n    },\r\n    onShopClick(btn)\r\n    {\r\n        GameManager.getInstance().shopType=0;\r\n        cc.director.loadScene(\"shop\", function(){\r\n        \r\n        });\r\n    },\r\n    CheckJoin(lauchOption)//检查是否被邀请进入战斗\r\n    {\r\n        if(lauchOption == null || lauchOption.query == null)\r\n        {\r\n            \r\n        }\r\n        else{//卡片启动流程\r\n            var roomId=lauchOption.query.roomId;\r\n            console.log(\"roomId:\"+roomId)\r\n            if(roomId != null)\r\n            {\r\n                //加入房间\r\n                GameManager.getInstance().Chicken_JoinRoom(roomId,function(resp){\r\n                    GameManager.getInstance().isRoomOwner=false;\r\n                    GameManager.getInstance().roomId=roomId;\r\n                    GameManager.getInstance().chickenMode=1;\r\n                    GameManager.getInstance().gameState = gameEnum.GAME_STATE.CHIKEN_MATCHING;\r\n                    GameManager.getInstance().LoadScene(\"game\");\r\n                    \r\n                });\r\n                GameManager.getInstance().lauchOption=null;\r\n            }\r\n        }\r\n    },\r\n    \r\n    CheckJoinFamily(lauchOption)//检查是否被邀请进入战斗\r\n    {\r\n        if(lauchOption == null || lauchOption.query == null){\r\n            return;\r\n        }\r\n        \r\n        //卡片启动流程\r\n        // var familyId = \"bb08a80f-9c1c-4a39-937d-a6babcf13282\";\r\n        // var invitorName = \"fadsf\";\r\n        var familyId=lauchOption.query.familyId;\r\n        var invitorName = lauchOption.query.invitorName;\r\n        console.log(\"invite join family\", familyId, invitorName);\r\n        if(familyId != null)\r\n        {\r\n            //加入房间\r\n            this.joinFamilyId = familyId;\r\n            this.familyJoinNode.active = true;\r\n            this.familyJoinNode.getComponent(cc.Animation).play(\"main_Invitefamily\");\r\n            cc.find(\"panel/lb_name\", this.familyJoinNode).getComponent(cc.Label).string = invitorName;\r\n            GameManager.getInstance().lauchOption=null;\r\n        }\r\n    },\r\n    OnSign(event)\r\n    {\r\n        SignPanel.show(80,function(result){   \r\n            GameManager.getInstance().myInfo.score=result;\r\n            _this.infoNode.getChildByName(\"lb_num\").getComponent(cc.Label).string = result;\r\n            GameManager.getInstance().myInfo.isTodaySigned=true;\r\n        },!GameManager.getInstance().myInfo.isTodaySigned,0);\r\n    },\r\n    \r\n    onPlayAdvertiseVideoDone(result){\r\n        if(result){\r\n            GameManager.getInstance().GainTool(function(resp){\r\n                _this.infoNode.getChildByName(\"lb_live_num\").getComponent(cc.Label).string = resp;\r\n            });\r\n        }\r\n    },\r\n    playLampText()\r\n    {\r\n\r\n        var tips;\r\n        if(GameManager.getInstance().brodcastList != null && GameManager.getInstance().brodcastList.length >0)\r\n        {\r\n            tips=GameManager.getInstance().brodcastList.pop()\r\n            _this.doPlayLampText(tips)\r\n        }\r\n        else\r\n        {\r\n            GameManager.getInstance().getBrodcast(function(resp){\r\n                GameManager.getInstance().brodcastList=resp;\r\n                if(resp != null && resp.length >0)\r\n                {\r\n                    tips=GameManager.getInstance().brodcastList.pop()\r\n                }\r\n                _this.doPlayLampText(tips)\r\n            })\r\n        }\r\n    \r\n        \r\n    },\r\n    doPlayLampText(data)\r\n    {\r\n        var randomTime=10+5*Math.random();\r\n        var random=Math.round(Math.random()*(randomTips.length-1))\r\n        var tips=data == null?randomTips[random]:data\r\n        this.scheduleOnce(function(){\r\n            _this.lampText.play(tips,function(){_this.playLampText()});\r\n        },randomTime)\r\n    }\r\n});\r\n"]}