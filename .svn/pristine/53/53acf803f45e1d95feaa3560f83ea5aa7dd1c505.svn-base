{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\tools/assets\\scripts\\tools\\CountDown.js"],"names":["cc","Class","extends","Component","properties","label","default","type","Label","serializable","intervalTime","visible","reduiseTime","isStart","callback","pre","start","update","dt","countDownShow","baseSecond","hour","Math","floor","residue","minute","string","startCountDown","totalTime","cb","preContext","reset"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AACHC,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ,KAFN;AAGHC,0BAAc;AAHX,SADC;AAMRC,sBAAc;AACVJ,qBAAS,CADC;AAEVK,qBAAS;AAFC,SANN;AAURC,qBAAa;AACTN,qBAAS,CADA;AAETK,qBAAS;AAFA,SAVL;AAcRE,iBAAQ,KAdA;AAeRC,kBAAS,IAfD;AAgBRC,aAAI;AAhBI,KAHP;;AAuBL;;AAEAC,SAzBK,mBAyBI,CAER,CA3BI;AA6BLC,UA7BK,kBA6BGC,EA7BH,EA6BO;AACR,YAAG,CAAE,KAAKL,OAAV,EACA;AACI;AACH;AACA;AACL,YAAI,KAAKH,YAAL,IAAqB,CAAzB,EAA6B;;AAEzB,iBAAKA,YAAL,IAAqBQ,EAArB;AAEC,SAJL,MAIU;;AAEN,iBAAKR,YAAL,GAAoB,CAApB;;AAEA,iBAAKS,aAAL;AAEH;AACA,KA9CI;AA+CLA,iBA/CK,2BAgDL;AACI,YAAIC,aAAa,KAAKR,WAAtB;AACAQ,qBAAaA,aAAa,CAA1B;AACA,aAAKR,WAAL,GAAmBQ,UAAnB;;AAEA,YAAIC,OAAOC,KAAKC,KAAL,CAAWH,aAAa,IAAxB,CAAX;AACA,YAAII,UAAUJ,aAAaC,OAAO,IAAlC;AACA,YAAII,SAASH,KAAKC,KAAL,CAAWC,UAAU,EAArB,CAAb;AACAA,kBAAUA,UAAUC,SAAS,EAA7B;AACA,YAAIJ,OAAO,EAAX,EAAe;AACXA,mBAAO,MAAMA,IAAb;AACH;AACD,YAAII,SAAS,EAAb,EAAiB;AACbA,qBAAS,MAAMA,MAAf;AACH;AACD;AACA;AACA;AACA;AACA;AACA,aAAKpB,KAAL,CAAWqB,MAAX,GAAqB,KAAKX,GAAL,GAASS,OAA9B;AACA,YAAG,KAAKZ,WAAL,IAAkB,CAArB,EACA;AACI,iBAAKC,OAAL,GAAa,KAAb;AACA,gBAAG,KAAKC,QAAL,IAAiB,IAApB,EACA;AACI,qBAAKA,QAAL;AACH;AACJ;AACJ,KA7EI;AA8ELa,kBA9EK,0BA8EUC,SA9EV,EA8EoBC,EA9EpB,EA8EuBC,UA9EvB,EA+EL;AACI,aAAKf,GAAL,GAASe,UAAT;AACA,aAAKjB,OAAL,GAAa,IAAb;AACA,aAAKD,WAAL,GAAiBgB,SAAjB;AACA,aAAKd,QAAL,GAAce,EAAd;AACA,aAAKV,aAAL;AACH,KArFI;AAsFLY,SAtFK,mBAuFL;AACI,aAAKhB,GAAL,GAAS,EAAT;AACA,aAAKF,OAAL,GAAa,KAAb;AACA,aAAKD,WAAL,GAAiB,CAAjB;AACA,aAAKE,QAAL,GAAc,IAAd;AACH;AA5FI,CAAT","file":"CountDown.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\tools","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        label: {\r\n            default: null,                                  \r\n            type: cc.Label, \r\n            serializable: true,   \r\n        },\r\n        intervalTime: {\r\n            default: 1,            \r\n            visible: false    \r\n        },\r\n        reduiseTime: {\r\n            default: 0,            \r\n            visible: false    \r\n        },\r\n        isStart:false,\r\n        callback:null,\r\n        pre:\"\"\r\n    },\r\n\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        \r\n    },\r\n    \r\n    update (dt) {\r\n        if(! this.isStart)\r\n        {\r\n            return;\r\n        }\r\n         //每秒更新显示信息\r\n    if (this.intervalTime >= 0 ) {\r\n\r\n        this.intervalTime -= dt;\r\n        \r\n        }else {\r\n        \r\n        this.intervalTime = 1;\r\n        \r\n        this.countDownShow();\r\n        \r\n    }  \r\n    },\r\n    countDownShow()\r\n    {\r\n        var baseSecond = this.reduiseTime;\r\n        baseSecond = baseSecond - 1;\r\n        this.reduiseTime = baseSecond;\r\n       \r\n        var hour = Math.floor(baseSecond / 3600);\r\n        var residue = baseSecond - hour * 3600;\r\n        var minute = Math.floor(residue / 60);\r\n        residue = residue - minute * 60;\r\n        if (hour < 10) {\r\n            hour = \"0\" + hour;\r\n        }\r\n        if (minute < 10) {\r\n            minute = \"0\" + minute;\r\n        }\r\n        // if (residue < 10) {\r\n        //     residue = \"0\" + residue;\r\n        // }\r\n        // this.label.string = hour + \" : \" + minute + \" : \" + residue;\r\n        // this.label.string =  minute + \" : \" + residue;\r\n        this.label.string =  this.pre+residue;\r\n        if(this.reduiseTime<=0)\r\n        {\r\n            this.isStart=false;\r\n            if(this.callback != null)\r\n            {\r\n                this.callback();\r\n            }\r\n        }\r\n    },\r\n    startCountDown(totalTime,cb,preContext)\r\n    {\r\n        this.pre=preContext;\r\n        this.isStart=true;\r\n        this.reduiseTime=totalTime;\r\n        this.callback=cb;\r\n        this.countDownShow();\r\n    },\r\n    reset()\r\n    {\r\n        this.pre=\"\";\r\n        this.isStart=false;\r\n        this.reduiseTime=0;\r\n        this.callback=null;\r\n    }\r\n});\r\n"]}