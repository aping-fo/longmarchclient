{"version":3,"sources":["Monster.js"],"names":["AudioManager","require","t","side","cc","Class","extends","Component","properties","fireBall","default","type","Node","serializable","onLoad","_armatureDisPlay","getComponent","dragonBones","ArmatureDisplay","addEventListener","EventObject","COMPLETE","onAnimationComplete","FRAME_EVENT","onFrameEvent","_armature","armature","active","start","randomMove","update","dt","action","repeatForever","sequence","delayTime","Math","random","moveTo","v2","node","runAction","moveSideToFire","stopAllActions","_this","cb","callFunc","fire","playAnimation","setPosition","getPosition","x","event","name","getInstance","playEffect","EFFECT_TYPE","FIRE","stopEffect"],"mappings":"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","file":"Monster.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var AudioManager = require(\"AudioManager\");\r\n\r\nvar t=0;\r\nvar side=1;\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n    fireBall: {\r\n        default: null,                                  \r\n        type: cc.Node, \r\n        serializable: true,   \r\n    },\r\n},\r\n    onLoad:function(){\r\n        //获取 ArmatureDisplay\r\n        this._armatureDisPlay = this.getComponent(dragonBones.ArmatureDisplay)\r\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE, this.onAnimationComplete, this);\r\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.FRAME_EVENT, this.onFrameEvent, this);\r\n        //获取 Armatrue\r\n        this._armature = this._armatureDisPlay.armature();\r\n        //添加动画监听\r\n        this.fireBall.active = false;\r\n    },\r\n    start(){\r\n        this.randomMove();\r\n    },\r\n    update(dt)\r\n    {\r\n        // t=t+dt*side;\r\n        // if(t>1.3)\r\n        // {\r\n        //     side=-1;\r\n        // }\r\n        // if(t<0.3)\r\n        // {\r\n        //     side=1;\r\n        // }\r\n        // this._armature.animation.gotoAndStopByTime('normal',t);\r\n    },\r\n    randomMove(){\r\n        var action=cc.repeatForever(cc.sequence(cc.delayTime(0.5+Math.random()*3),cc.moveTo(2,cc.v2(192,300)),cc.delayTime(0.5+Math.random()*3),cc.moveTo(2,cc.v2(-192,300))));\r\n        this.node.runAction(action);\r\n    },\r\n    moveSideToFire(side)\r\n    {\r\n        this.node.stopAllActions();\r\n        var _this=this;\r\n        var cb=cc.callFunc(function(){_this.fire()})\r\n        var action=cc.sequence(cc.moveTo(.5,cc.v2(side == 1?192:-192,300)),cb);\r\n        this.node.runAction(action);\r\n    },\r\n\r\n    fire()\r\n    {\r\n        this._armatureDisPlay.playAnimation(\"fire\", 1);\r\n        this.fireBall.stopAllActions();\r\n        this.fireBall.active=true;\r\n        this.fireBall.setPosition(this.node.getPosition());\r\n        var _this=this;\r\n        var cb=cc.callFunc(function(){\r\n            _this.fireBall.active=false\r\n            _this.randomMove();\r\n        })\r\n        var action=cc.sequence(cc.moveTo(3,cc.v2(this.fireBall.getPosition().x,-800)),cb);\r\n        this.fireBall.runAction(action);\r\n    },\r\n\r\n    onAnimationComplete(event){\r\n        this._armatureDisPlay.playAnimation(\"normal\", -1);\r\n    },\r\n\r\n    onFrameEvent(event){\r\n        if(event.name == \"fireSoundBegin\"){\r\n            AudioManager.getInstance().playEffect(AudioManager.EFFECT_TYPE.FIRE);\r\n        }else if(event.name == \"fireSoundEnd\"){\r\n            AudioManager.getInstance().stopEffect(AudioManager.EFFECT_TYPE.FIRE);\r\n        }\r\n    }\r\n})\r\n\r\n"]}