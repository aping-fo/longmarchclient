{"version":3,"sources":["PopupLiveNode.js"],"names":["PopupWindow","require","PopupTipsNode","GameManager","WXTool","cc","Class","extends","statics","show","node","find","instantiate","getInstance","popupLiveNode","setParent","Canvas","instance","position","Vec2","ZERO","active","properties","watchVideoBtn","type","Button","default","onLoad","m_animation","getComponent","Animation","start","onEnable","pauseSystemEvents","play","interactable","advertiseVideoReady","onWatchVideoBtnClick","btn","showAdvertiseVideo","_this","onCloseBtnClick","ShowWithText","onFadeInFinish","resumeSystemEvents","onFadeOutFinish"],"mappings":";;;;;;AAAA,IAAIA,cAAcC,QAAQ,aAAR,CAAlB;AACA,IAAIC,gBAAgBD,QAAQ,eAAR,CAApB;AACA,IAAIE,cAAcF,QAAQ,aAAR,CAAlB;AACA,IAAIG,SAASH,QAAQ,QAAR,CAAb;;AAEAI,GAAGC,KAAH,CAAS;AACLC,aAASP,WADJ;;AAGLQ,aAAS;AACLC,cAAM,gBAAU;AACZ,gBAAIC,OAAOL,GAAGM,IAAH,CAAQ,sBAAR,CAAX;AACA,gBAAGD,QAAQ,IAAX,EAAgB;AACZA,uBAAOL,GAAGO,WAAH,CAAeT,YAAYU,WAAZ,GAA0BC,aAAzC,CAAP;AACAJ,qBAAKK,SAAL,CAAeV,GAAGW,MAAH,CAAUC,QAAV,CAAmBP,IAAlC;AACAA,qBAAKQ,QAAL,GAAgBb,GAAGc,IAAH,CAAQC,IAAxB;AACH;;AAEDV,iBAAKW,MAAL,GAAc,IAAd;AACH;AAVI,KAHJ;;AAgBLC,gBAAY;AACRC,uBAAe;AACXC,kBAAMnB,GAAGoB,MADE;AAEXC,qBAAS;AAFE;AADP,KAhBP;;AAuBLC,UAvBK,oBAuBK;AACN,aAAKC,WAAL,GAAmB,KAAKC,YAAL,CAAkBxB,GAAGyB,SAArB,CAAnB;AACH,KAzBI;AA2BLC,SA3BK,mBA2BI,CACR,CA5BI;AA8BLC,YA9BK,sBA8BK;AACN,aAAKtB,IAAL,CAAUuB,iBAAV,CAA4B,IAA5B;AACA,aAAKL,WAAL,CAAiBM,IAAjB,CAAsB,qBAAtB;AACA,aAAKX,aAAL,CAAmBY,YAAnB,GAAkC/B,OAAOS,WAAP,GAAqBuB,mBAAvD;AACH,KAlCI;AAoCLC,wBApCK,gCAoCgBC,GApChB,EAoCoB;AACrBlC,eAAOS,WAAP,GAAqB0B,kBAArB,CAAwC,YAAU;AAC9CC,kBAAMC,eAAN;AACH,SAFD,EAEG,YAAU;AACTvC,0BAAcwC,YAAd,CAA2B,QAA3B;AACH,SAJD;AAKH,KA1CI;AA4CLD,mBA5CK,2BA4CWH,GA5CX,EA4Ce;AAChB,aAAK5B,IAAL,CAAUuB,iBAAV,CAA4B,IAA5B;AACA,aAAKL,WAAL,CAAiBM,IAAjB,CAAsB,qBAAtB;AACH,KA/CI;AAiDLS,kBAjDK,4BAiDW;AACZ,aAAKjC,IAAL,CAAUkC,kBAAV,CAA6B,IAA7B;AACH,KAnDI;AAqDLC,mBArDK,6BAqDY;AACb,aAAKnC,IAAL,CAAUkC,kBAAV,CAA6B,IAA7B;AACA,aAAKlC,IAAL,CAAUW,MAAV,GAAmB,KAAnB;AACH;AAxDI,CAAT","file":"PopupLiveNode.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var PopupWindow = require(\"PopupWindow\");\r\nvar PopupTipsNode = require(\"PopupTipsNode\");\r\nvar GameManager = require(\"GameManager\");\r\nvar WXTool = require(\"WXTool\");\r\n\r\ncc.Class({\r\n    extends: PopupWindow,\r\n\r\n    statics: {\r\n        show: function(){\r\n            var node = cc.find(\"Canvas/PopupLiveNode\");\r\n            if(node == null){\r\n                node = cc.instantiate(GameManager.getInstance().popupLiveNode);\r\n                node.setParent(cc.Canvas.instance.node);\r\n                node.position = cc.Vec2.ZERO;\r\n            }\r\n            \r\n            node.active = true;\r\n        }\r\n    },\r\n\r\n    properties: {\r\n        watchVideoBtn: {\r\n            type: cc.Button,\r\n            default: null\r\n        }\r\n    },\r\n\r\n    onLoad () {\r\n        this.m_animation = this.getComponent(cc.Animation);\r\n    },\r\n\r\n    start () {\r\n    },\r\n\r\n    onEnable(){\r\n        this.node.pauseSystemEvents(true);\r\n        this.m_animation.play(\"popup_livenode_show\");\r\n        this.watchVideoBtn.interactable = WXTool.getInstance().advertiseVideoReady;\r\n    },\r\n\r\n    onWatchVideoBtnClick(btn){\r\n        WXTool.getInstance().showAdvertiseVideo(function(){\r\n            _this.onCloseBtnClick();\r\n        }, function(){\r\n            PopupTipsNode.ShowWithText(\"视频播放失败\");\r\n        });\r\n    },\r\n\r\n    onCloseBtnClick(btn){\r\n        this.node.pauseSystemEvents(true);\r\n        this.m_animation.play(\"popup_livenode_hide\");\r\n    },\r\n\r\n    onFadeInFinish(){\r\n        this.node.resumeSystemEvents(true);\r\n    },\r\n\r\n    onFadeOutFinish(){\r\n        this.node.resumeSystemEvents(true);\r\n        this.node.active = false;\r\n    }\r\n});\r\n"]}