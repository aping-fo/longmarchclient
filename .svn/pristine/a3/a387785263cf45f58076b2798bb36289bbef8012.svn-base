{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\GameManager.js"],"names":["httpReq","require","gameEnum","CMD","WXTool","LoadingBar","AudioManager","SelfTestModel","LOCALSTORAGEKEY_HitoryQuestions","GameManager","cc","Class","extends","Component","properties","gameState","default","GAME_STATE","HOME","type","Enum","myInfo","Object","oppInfo","familyInfo","questions","curQuestionIdx","curRound","callBack_matchSuc","callBack_matchCheck","lauchOption","sceneGoingTo","sceneLoaded","sceneLoading","testCategory","gameMode","chickenGroup","chickenMode","brodcastList","shopType","ctor","director","getCollisionManager","enabled","playerInfoPanel","reviewPanel","popupLiveNode","_this","loader","loadRes","Prefab","err","prefab","error","message","fighterNode","initSetting","start","GetOpenId","code","callback","data","Post","GET_OPENID","resp","CreateRole","nick","icon","nickName","iconUrl","CREATE_ROLE","UpdateRole","UPDATE_ROLE","GetRoleInfo","GET_ROLE","score","totalScore","toolCount","getInstance","reportScore","GainTool","GAIN_TOOL","SendMatch","START_MATCH","SendRobotMatch","single","CancelMatch","END_MATCH","ExitGame","EXIT_ROOM","CheckMatch","th","GET_MATCH_RESULT","GetNext","GET_QUEST","CheckNextRound","GrabChess","idx","ROB_ANSWER","GrabChessByRobot","console","log","ROBOT_ROB_ANSWER","SendAnswer","answer","ANSWER_QUEST","SendAnswerByRobot","ROBOT_ANSWER_QUEST","GetAnswer","cfgid","cfgId","GET_ANSWER","SubmitResult","isWin","SUBMIT_VICTORY","GetRoomResult","GET_ROOM_RESULT","GetQuestBankCategory","GET_QUEST_BANK_CATEGORY","GetRobState","CHECK_ROB","CreateRoom","CREATE_ROOM","JoinRoom","roomId","roomID","JOIN_ROOM","GetHistoryQuestions","GET_HISTORY_QUESTION","OpenFriendRank","myFamilyInfo","openFriendRank","OpenPlayerRank","from","count","fromIndex","toIndex","GET_RANK_INFO","openPlayerRank","SignUpMasterMatch","SIGN_UP_MASTERMATCH","Chicken_StartMatch","mode","CHICKEN_START_MATCH","Chicken_EndMatch","CHICKEN_END_MATCH","Chicken_CreateRoom","modeValue","CHICKEN_CREATE_ROOM","Chicken_JoinRoom","roomIdValue","CHICKEN_JOIN_ROOM","Chicken_GetRoomState","CHICKEN_GET_ROOM_STATUS","Chicken_GetQuestion","CHICKEN_GET_QUESTION","Chicken_GetSituation","CHICKEN_GET_PLAYING_SITUATION","Chicken_SubmitAnswer","openId","answerValue","questionIdValue","answerOpenId","questionId","CHICKEN_SUBMIT_ANSWER","Chicken_GetResult","CHICKEN_GET_RESULT","Chicken_ExitRoom","CHICKEN_EXIT_ROOM","Chicken_Use_UnDeadTool","useCount","CHICEKN_USE_UNDEADTOOL","Chicken_GET_LIMIT","GET_CHICKEN_LIMIT","Chicken_GET_LIMIT_RANK_LIST","to","GET_CHICKEN_LIMIT_RANK_LIST","Chicken_GET_LIMIT_RANK","GET_CHICKEN_LIMIT_RANK","Chicken_StartNow","CHICEKN_SET_GAME_START","Family_GetInfo","FAMILYGROUP_INFO","Family_Create","name","FAMILYGROUP_CREATE","Family_AddMember","familyId","id","FAMILYGROUP_ADD_MEMBER","Family_RemoveMember","memberOpenId","FAMILYGROUP_REMOVE_MEMBER","Family_Exit","FAMILYGROUP_EXIT","Family_Dissolve","FAMILYGROUP_DIS","Family_ModifyName","FAMILYGROUP_CHANGENAME","Sign","SIGN","getBrodcast","GET_BROADCAST","GetMallItems","GET_MALL_ITEMS","ConsumeMallItems","phone","address","itemId","CONSUME_MALL_ITEMS","PreLoadScene","sceneName","self","Array","push","preloadScene","i","length","hide","loadScene","LoadScene","indexOf","show","getHistoryQuestionsUrl","str","sys","localStorage","getItem","setItem","setHistoryQuestionsUrl","getChickenPlayer","init","_instance","module","exports"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var httpReq = require('HttpReq');\r\nvar gameEnum = require('GameEnum')\r\nvar CMD = require(\"CMD\");\r\nvar WXTool = require(\"WXTool\");\r\nvar LoadingBar = require('LoadingBar');\r\nvar AudioManager = require(\"AudioManager\");\r\nvar SelfTestModel = require(\"SelfTestModel\");\r\n\r\n\r\nconst LOCALSTORAGEKEY_HitoryQuestions = \"HistoryQuestions\";\r\n\r\nvar GameManager = cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        gameState: {\r\n            default: gameEnum.GAME_STATE.HOME,\r\n            type: cc.Enum(gameEnum.GAME_STATE),\r\n        },\r\n        myInfo:\r\n        {\r\n            default: null,\r\n            type: Object,\r\n        },\r\n        oppInfo:\r\n        {\r\n            default: null,\r\n            type: Object,\r\n        },\r\n\r\n        familyInfo: null,   //家庭群信息\r\n        questions: null,\r\n        curQuestionIdx: -1,\r\n        curRound: 0,\r\n        callBack_matchSuc: null,\r\n        callBack_matchCheck: null,\r\n        lauchOption: null,\r\n        sceneGoingTo: null,\r\n        sceneLoaded: [],\r\n        sceneLoading: [],\r\n        testCategory: 0,//体质测试选择的体质\r\n        gameMode: 0,\r\n        chickenGroup: null,\r\n        chickenMode:0,//好友，练习，匹配\r\n        brodcastList:null,\r\n        shopType:0//商店类别\r\n    },\r\n\r\n\r\n    ctor: function () {\r\n        cc.director.getCollisionManager().enabled = true;\r\n\r\n        this.playerInfoPanel = null;\r\n        this.reviewPanel = null;\r\n        this.popupLiveNode = null;\r\n\r\n        var _this = this;\r\n\r\n        cc.loader.loadRes(\"prefabs/FighterNode\", cc.Prefab, function (err, prefab) {\r\n            if (err) {\r\n                cc.error(err.message || err);\r\n                return;\r\n            }\r\n            _this.fighterNode = prefab;\r\n        });\r\n        cc.loader.loadRes(\"prefabs/PopupLiveNode\", cc.Prefab, function (err, prefab) {\r\n            if (err) {\r\n                cc.error(err.message || err);\r\n                return;\r\n            }\r\n            _this.popupLiveNode = prefab;\r\n        });\r\n\r\n        this.initSetting();\r\n    },\r\n    // onLoad () {},\r\n\r\n    start() {\r\n    },\r\n\r\n    GetOpenId(code, callback) {\r\n        var data = { code: code };\r\n        httpReq.Post(CMD.GET_OPENID, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    CreateRole(nick, icon, callback) {\r\n        var data = { nickName: nick, iconUrl: icon };\r\n        httpReq.Post(CMD.CREATE_ROLE, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    UpdateRole(nick, icon, callback) {\r\n        var data = { nickName: nick, iconUrl: icon };\r\n        httpReq.Post(CMD.UPDATE_ROLE, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    GetRoleInfo(callback) {\r\n        var data = {};\r\n        var _this = this;\r\n        httpReq.Post(CMD.GET_ROLE, data, function (resp) {\r\n            _this.myInfo.score = resp.score;\r\n            _this.myInfo.totalScore = resp.totalScore;\r\n            _this.myInfo.toolCount = resp.toolCount;\r\n\r\n            WXTool.getInstance().reportScore(_this.myInfo.totalScore);\r\n            callback(resp);\r\n        });\r\n    },\r\n    \r\n    //获取道具\r\n    GainTool(callback){\r\n        var data = {};\r\n        var _this = this;\r\n        httpReq.Post(CMD.GAIN_TOOL, data, function (resp) {\r\n            _this.myInfo.toolCount = resp;\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //请求匹配\r\n    SendMatch(callback) {\r\n        var data = { nickName: GameManager.getInstance().myInfo['wxName'] };\r\n        httpReq.Post(CMD.START_MATCH, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //请求机器人匹配\r\n    SendRobotMatch(callback) {\r\n        var data = { nickName: GameManager.getInstance().myInfo['wxName'], iconUrl: \"\", single: true };\r\n        httpReq.Post(CMD.START_MATCH, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //取消匹配\r\n    CancelMatch(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.END_MATCH, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //退出游戏\r\n    ExitGame(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.EXIT_ROOM, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //检查是否匹配到人\r\n    CheckMatch() {\r\n        var data = {};\r\n        var th = this;\r\n        httpReq.Post(CMD.GET_MATCH_RESULT, data, function (resp) {\r\n            if (th.callBack_matchCheck != null) {\r\n                th.callBack_matchCheck(resp);\r\n            }\r\n        });\r\n        //返回对方玩家信息，游戏开始\r\n    },\r\n    //请求亮题\r\n    GetNext(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.GET_QUEST, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //检查下一轮是否开始\r\n    CheckNextRound(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.GET_QUEST, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //抢棋子\r\n    GrabChess(idx, callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.ROB_ANSWER, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //机器人抢棋子\r\n    GrabChessByRobot(callback) {\r\n        console.log(\"GrabChessByRobot\");\r\n        var data = {};\r\n        httpReq.Post(CMD.ROBOT_ROB_ANSWER, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //选择答案\r\n    SendAnswer(idx, callback) {\r\n        var data = { answer: idx };\r\n        httpReq.Post(CMD.ANSWER_QUEST, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //机器人选择答案\r\n    SendAnswerByRobot(idx, callback) {\r\n        console.log(\"SendAnswerByRobot\");\r\n        var data = { answer: idx };\r\n        httpReq.Post(CMD.ROBOT_ANSWER_QUEST, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //获得正确答案\r\n    GetAnswer(cfgid, callback) {\r\n        var data = { cfgId: cfgid };\r\n        httpReq.Post(CMD.GET_ANSWER, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //提交结果\r\n    SubmitResult(isWin, callback) {\r\n        var data = { isWin: isWin };\r\n        httpReq.Post(CMD.SUBMIT_VICTORY, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //获取当前棋盘状态\r\n    GetRoomResult(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.GET_ROOM_RESULT, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //请求题库类型\r\n    GetQuestBankCategory(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.GET_QUEST_BANK_CATEGORY, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //检查是否被抢\r\n    GetRobState(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHECK_ROB, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //创建房间\r\n    CreateRoom(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CREATE_ROOM, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n    //加入房间\r\n    JoinRoom(roomId, callback) {\r\n        var data = { roomID: roomId };\r\n        httpReq.Post(CMD.JOIN_ROOM, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    //请求历史题库\r\n    GetHistoryQuestions(callback) {\r\n        var data = {};\r\n\r\n        httpReq.Post(CMD.GET_HISTORY_QUESTION, data, function (resp) {\r\n            callback(resp);\r\n        });\r\n    },\r\n\r\n    ///////////////////////// 排行榜 ///////////////////////////\r\n    OpenFriendRank() {\r\n        var myInfo = {myInfo: this.myInfo, myFamilyInfo: this.familyInfo}\r\n        WXTool.getInstance().openFriendRank(myInfo);\r\n    },\r\n\r\n    OpenPlayerRank(from, count) {\r\n        var data = { fromIndex: from, toIndex: count };\r\n        var myInfo = {myInfo: this.myInfo, myFamilyInfo: this.familyInfo}\r\n\r\n        httpReq.Post(CMD.GET_RANK_INFO, data, function (resp) {\r\n            console.log(\"GET_RANK_INFO \", resp);\r\n\r\n            WXTool.getInstance().openPlayerRank(resp, from, myInfo);\r\n        });\r\n    },\r\n\r\n    ////////////////////////大师赛//////////////////////////////\r\n    SignUpMasterMatch(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.SIGN_UP_MASTERMATCH, data, callback);\r\n    },\r\n    //--------------------------------------吃鸡-----------------------------------------------//\r\n    Chicken_StartMatch(callback) {\r\n        var data = {mode:3};\r\n        httpReq.Post(CMD.CHICKEN_START_MATCH, data, callback);\r\n    },\r\n    Chicken_EndMatch(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHICKEN_END_MATCH, data, callback);\r\n    },\r\n    \r\n    Chicken_CreateRoom(modeValue, callback) {\r\n        var data = { mode: modeValue };\r\n        httpReq.Post(CMD.CHICKEN_CREATE_ROOM, data, callback);\r\n    },\r\n    Chicken_JoinRoom(roomIdValue, callback) {\r\n        var data = { roomId: roomIdValue };\r\n        httpReq.Post(CMD.CHICKEN_JOIN_ROOM, data, callback);\r\n    },\r\n    Chicken_GetRoomState(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHICKEN_GET_ROOM_STATUS, data, callback);\r\n    },\r\n    Chicken_GetQuestion(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHICKEN_GET_QUESTION, data, callback);\r\n    },\r\n    Chicken_GetSituation(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHICKEN_GET_PLAYING_SITUATION, data, callback);\r\n    },\r\n    Chicken_SubmitAnswer(openId, answerValue, questionIdValue, callback) {\r\n        openId = openId || GameManager.getInstance().myInfo.openId;\r\n        var data = { answerOpenId: openId, answer: answerValue, questionId: questionIdValue };\r\n        httpReq.Post(CMD.CHICKEN_SUBMIT_ANSWER, data, callback);\r\n    },\r\n    Chicken_GetResult(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHICKEN_GET_RESULT, data, callback);\r\n    },\r\n    Chicken_ExitRoom(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.CHICKEN_EXIT_ROOM, data, callback);\r\n    },\r\n    Chicken_Use_UnDeadTool(count, callback){\r\n        var data = {\r\n            useCount: count\r\n        };\r\n        httpReq.Post(CMD.CHICEKN_USE_UNDEADTOOL, data, callback);\r\n    },\r\n    Chicken_GET_LIMIT(callback){\r\n        var data = {\r\n        };\r\n        httpReq.Post(CMD.GET_CHICKEN_LIMIT, data, callback);\r\n    },\r\n    Chicken_GET_LIMIT_RANK_LIST(from, to, callback){\r\n        var data = {\r\n            fromIndex: from,\r\n            toIndex: to\r\n        };\r\n        httpReq.Post(CMD.GET_CHICKEN_LIMIT_RANK_LIST, data, callback);\r\n    },\r\n    Chicken_GET_LIMIT_RANK(callback){\r\n        var data = {\r\n        };\r\n        httpReq.Post(CMD.GET_CHICKEN_LIMIT_RANK, data, callback);\r\n    },\r\n    Chicken_StartNow(callback)\r\n    {\r\n        var data = {\r\n        };\r\n        httpReq.Post(CMD.CHICEKN_SET_GAME_START, data, callback);\r\n        \r\n    },\r\n    //--------------------------------------家庭群-----------------------------------------------//\r\n    Family_GetInfo(callback) {\r\n        var data = {};\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_INFO, data, function (resp) {\r\n            _this.familyInfo = resp;\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    Family_Create(name, callback) {\r\n        var data = {\r\n            name: name\r\n        };\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_CREATE, data, function (resp) {\r\n            _this.familyInfo = resp;\r\n\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    Family_AddMember(familyId, callback) {\r\n        var data = {\r\n            id: familyId\r\n        };\r\n\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_ADD_MEMBER, data, function (resp) {\r\n            _this.familyInfo = resp;\r\n\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    Family_RemoveMember(openId, callback) {\r\n        var data = {\r\n            memberOpenId: openId\r\n        };\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_REMOVE_MEMBER, data, function (resp) {\r\n            _this.familyInfo = resp;\r\n\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    Family_Exit(callback) {\r\n        var data = {};\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_EXIT, data, function (resp) {\r\n            _this.familyInfo = null;\r\n\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    Family_Dissolve(callback) {\r\n        var data = {};\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_DIS, data, function (resp) {\r\n            _this.familyInfo = null;\r\n\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    Family_ModifyName(name, callback) {\r\n        var data = {\r\n            name: name\r\n        };\r\n\r\n        var _this = this;\r\n        httpReq.Post(CMD.FAMILYGROUP_CHANGENAME, data, function (resp) {\r\n            _this.familyInfo = resp;\r\n\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n    //签到\r\n    Sign(callback,type) {\r\n        var data = {type:type};\r\n        httpReq.Post(CMD.SIGN, data, function (resp) {\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });\r\n    },\r\n\r\n    //获取公告\r\n    getBrodcast(callback)\r\n    {\r\n        var data = {};\r\n        httpReq.Post(CMD.GET_BROADCAST, data, function (resp) {\r\n            if (callback) {\r\n                callback(resp);\r\n            }\r\n        });   \r\n    },\r\n    //--------------------------------------商城-----------------------------------------------//\r\n    GetMallItems(callback) {\r\n        var data = {};\r\n        httpReq.Post(CMD.GET_MALL_ITEMS, data, callback);\r\n    },\r\n    ConsumeMallItems(name, phone, address, itemId, callback) {\r\n        var data = { name: name, phone: phone, address: address, itemId: itemId };\r\n        httpReq.Post(CMD.CONSUME_MALL_ITEMS, data, callback);\r\n    },\r\n\r\n    PreLoadScene(sceneName, callback) {\r\n        var self = GameManager.getInstance();\r\n        if (self.sceneLoading == null) {\r\n            self.sceneLoading = new Array();\r\n        }\r\n        self.sceneLoading.push(sceneName);\r\n        cc.director.preloadScene(sceneName, function () {\r\n            if (self.sceneLoaded == null) {\r\n                self.sceneLoaded = new Array();\r\n            }\r\n            self.sceneLoaded.push(sceneName);\r\n            for (var i = 0; i < self.sceneLoading.length; i++) {\r\n                if (self.sceneLoading[i] == sceneName) {\r\n                    self.sceneLoading[i] = \"\";\r\n                    break;\r\n                }\r\n            }\r\n            if (callback != null) {\r\n                callback();\r\n            }\r\n            if (sceneName == self.sceneGoingTo) {\r\n                LoadingBar.hide();\r\n                cc.director.loadScene(sceneName, function () { self.sceneGoingTo = null });\r\n            }\r\n        });\r\n    },\r\n\r\n    LoadScene(sceneName) {\r\n        var self = GameManager.getInstance();\r\n        if (self.sceneLoaded == null || self.sceneLoaded.indexOf(sceneName) == -1) {\r\n            if (self.sceneLoading == null || self.sceneLoading.indexOf(sceneName) == -1) {\r\n                cc.director.loadScene(sceneName, function () { self.sceneGoingTo = null });\r\n            }\r\n            else {\r\n                self.sceneGoingTo = sceneName;\r\n                LoadingBar.show();\r\n            }\r\n\r\n        }\r\n        else {\r\n            cc.director.loadScene(sceneName, function () { self.sceneGoingTo = null });\r\n        }\r\n    },\r\n\r\n    getHistoryQuestionsUrl() {\r\n        var str = cc.sys.localStorage.getItem(LOCALSTORAGEKEY_HitoryQuestions);\r\n        if (str == null) {\r\n            str = \"\";\r\n            cc.sys.localStorage.setItem(LOCALSTORAGEKEY_HitoryQuestions, str);\r\n        }\r\n\r\n        return str;\r\n    },\r\n\r\n    setHistoryQuestionsUrl(str) {\r\n        cc.sys.localStorage.setItem(LOCALSTORAGEKEY_HitoryQuestions, str);\r\n    },\r\n    getChickenPlayer(openId) {\r\n        if (this.chickenGroup == null) {\r\n            return null;\r\n        }\r\n        for (var i = 0; i < this.chickenGroup.length; i++) {\r\n            if (this.chickenGroup[i].openId == openId) {\r\n                return this.chickenGroup[i];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n  \r\n\r\n\r\n    ///////////////////////设置////////////////////////////////\r\n    initSetting() {\r\n        AudioManager.getInstance().init();\r\n    },\r\n});\r\nGameManager._instance = null;\r\nGameManager.getInstance = function () {\r\n    if (!GameManager._instance) {\r\n        GameManager._instance = new GameManager();\r\n    }\r\n    return GameManager._instance;\r\n}\r\n\r\nmodule.exports = GameManager;\r\n\r\n"]}